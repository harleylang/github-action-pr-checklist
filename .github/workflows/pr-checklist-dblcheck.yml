# from: https://github.com/americanexpress/task-status-pr-checker
name: pr-checklist-dblcheck
on:
  pull_request:
    types:
      - opened
      - edited
  pull_request_review_comment:
    types:
      - created
      - deleted
      - edited
  issue_comment:
    types:
      - created
      - deleted
      - edited
jobs:
  task_checker:
    runs-on: ubuntu-latest
    name: Pull request checkout dblchecker
    steps:
      - uses: peter-evans/find-comment@v1
        id: bot
        with:
          issue-number: ${{ github.event.number }}
          body-includes: "<!-- GH BOT -->"

      - name: Print Comment ID & Author
        run: |
          echo ${{ steps.bot.outputs.comment-id }}
          echo ${{ steps.bot.outputs.comment-author }}

      - uses: actions-ecosystem/action-regex-match@v2
        id: description
        with:
          text: ${{ steps.bot.outputs.comment-body }}
          regex: '^[A-Za-z_"]+:\s+.*$' #/(- \[[ ]\].+)/g
          flags: m
